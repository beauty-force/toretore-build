import{H as I,K as M,h as P,u as V,r as d,o as u,c,a as i,w as h,F as g,b as t,I as v,d as A,e as f,v as p,t as n,M as B,f as x,n as j,g as m,j as q}from"./app.8806da31.js";import{U as E}from"./UserLayout.6ab3dbc7.js";import{C as O,A as N,p as S,a as R,D as z}from"./index.343e4a0a.js";import{_ as K}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as G,a as J}from"./TrashIcon.7e99f1f1.js";import{N as Q,d as W,U as X,o as Y,f as Z}from"./toastify.11f04116.js";O.register(N,S,R);const $={components:{Head:I,AppLayout:E,Doughnut:z,PencilIcon:G,TrashIcon:J,Dialog:Q,DialogPanel:W,DialogTitle:X,TransitionChild:Y,TransitionRoot:Z},props:{errors:Object,ranks:Object,rankData:Array},data(){return{chartColors:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#8E44AD","#2ECC71","#E74C3C","#3498DB","#F1C40F","#1ABC9C","#9B59B6","#34495E","#95A5A6"],url1:null,open:!1}},computed:{rankDistributionData(){return{labels:this.rankData.map(e=>e.title),datasets:[{data:this.rankData.map(e=>e.count),backgroundColor:this.chartColors,hoverBackgroundColor:this.chartColors}]}},rankDistributionOptions(){return{responsive:!0,cutout:"0%",plugins:{legend:{display:!1},tooltip:{callbacks:{label:e=>`${e.raw} \u4EBA`}}}}}},methods:{destroy_rank(e){confirm("\u524A\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304B\uFF1F")&&M.Inertia.delete(route("admin.rank.destroy",{id:e}))},modalOpen(e){e?(this.form.id=e.id,this.form.rank=e.rank,this.form.title=e.title,this.form.amount=e.amount,this.form.limit=e.limit,this.form.bonus=e.bonus,this.form.pt_rate=e.pt_rate,this.form.rankup=e.rankup,this.form.expiration=e.expiration,this.form.image="",this.url1=e.image):(this.form.id=0,this.form.rank="",this.form.title="",this.form.amount=0,this.form.limit=0,this.form.bonus=0,this.form.pt_rate=0,this.form.rankup=1,this.form.image="",this.form.expiration=0,this.url1=""),this.open=!0},submit(){this.$refs.photo1.files[0]&&(this.form.image=this.$refs.photo1.files[0]),this.form.rankup=="0"&&(this.form.pt_rate=0,this.form.expiration=0,this.form.limit=0),this.form.post(route("admin.rank.store"),{preserveScroll:!0,onFinish:()=>{P().props.value.flash.message&&(this.open=!1)}})},previewImage1(e){const o=e.target.files[0];this.url1=URL.createObjectURL(o)},pt_rate_string(e){return e.rankup==0?'<span class="text-[1.5em]">\u2014</span>':`${e.pt_rate}%`},format_number(e){return String(e).replace(/(.)(?=(\d{3})+$)/g,"$1,")},pt_rate_string(e){return e.rankup==0?'<span class="text-[1.5em]">\u2014</span>':`${e.pt_rate}%`},bonus_pt_string(e){return e.bonus==0?'<span class="text-[1.5em]">\u2014</span>':`${this.format_number(e.bonus)} PT`},expiration_string(e){return e.expiration==0?'<span class="text-[1.5em]">\u2014</span>':`${e.expiration}\u65E5`},limit_string(e){return e.limit==0?'<span class="text-[1.5em]">\u2014</span>':`${this.format_number(e.limit)} \u5186`}},setup(e){return{form:V({id:"",rank:"",title:"",amount:"",limit:"",expiration:"",bonus:"",pt_rate:"",rankup:"",image:""})}}},tt={class:"mb-6 max-w-3xl mx-auto"},et=t("h2",{class:"text-lg font-bold text-center mb-4"},"\u30E9\u30F3\u30AF\u5206\u5E03",-1),st={class:"flex flex-col md:flex-row items-center justify-center gap-8"},ot={class:"w-full max-w-xs md:max-w-sm"},rt={class:"w-full max-w-sm"},nt={class:"w-full text-sm bg-white shadow rounded-lg"},at=t("thead",null,[t("tr",{class:"bg-gray-200"},[t("th",{class:"p-2 text-left"},"\u30E9\u30F3\u30AF\u540D"),t("th",{class:"p-2 text-left"},"\u4EBA\u6570"),t("th",{class:"p-2 text-left"},"\u8272")])],-1),lt={class:"p-2"},it={class:"p-2"},dt={class:"p-2"},ut={class:"pt-4 px-2 md:px-4 py-2 max-w-3xl mx-auto"},ct=t("h1",{class:"mb-2 text-lg font-bold"},"\u30E9\u30F3\u30AF\u7279\u5178\u8A2D\u5B9A",-1),mt=t("hr",{class:"mb-2"},null,-1),ft={class:"w-full overflow-auto text-sm"},pt={class:"min-w-full mt-2 bg-white shadow rounded-lg"},_t=t("thead",null,[t("tr",{class:"bg-gray-200 whitespace-nowrap"},[t("th",{class:"p-2"},"\u30E9\u30F3\u30AF"),t("th",{class:"p-2"},"\u30E9\u30F3\u30AF\u540D"),t("th",{class:"p-2"},"\u8CFC\u5165\u6642PT\u4ED8\u4E0E"),t("th",{class:"p-2"},"\u5230\u9054\u91D1\u984D"),t("th",{class:"p-2"},"\u30DC\u30FC\u30CA\u30B9PT"),t("th",{class:"p-2"},"\u7DAD\u6301\u671F\u65E5"),t("th",{class:"p-2"},"\u7DAD\u6301\u91D1\u984D"),t("th")])],-1),ht={class:"p-2 text-center"},bt={class:"p-2 text-center"},xt=["innerHTML"],gt={class:"p-2 text-center"},yt=["innerHTML"],vt=["innerHTML"],wt=["innerHTML"],kt={class:"px-1 py-2 flex items-center justify-center gap-0.5"},Ct=["onClick"],Dt=["onClick"],Tt={class:"text-center my-6"},Ft=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Lt={class:"fixed inset-0 z-20 overflow-y-auto"},Ut={class:"flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"},Ht={class:"mb-4"},It=t("label",{for:"rank",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30E9\u30F3\u30AF\uFF08\u534A\u89D2\u6570\u5B57\uFF09"),t("span",{class:"text-red-500"},"*")],-1),Mt={class:"text-red-500 text-sm mt-1"},Pt={class:"mb-4"},Vt=t("label",{for:"rankup",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u7A2E\u985E"),t("span",{class:"text-red-500"},"*")],-1),At=t("option",{value:"1"},"\u30E9\u30F3\u30AF",-1),Bt=t("option",{value:"0"},"\u30DF\u30C9\u30EB\u30AE\u30D5\u30C8",-1),jt=[At,Bt],qt={class:"text-red-500 text-sm mt-1"},Et={class:"mb-4"},Ot=t("label",{for:"title",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30E9\u30F3\u30AF\u540D"),t("span",{class:"text-red-500"},"*")],-1),Nt={class:"text-red-500 text-sm mt-1"},St={class:"mb-4"},Rt=t("label",{for:"amount",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30E9\u30F3\u30AF\u3078\u306E\u6607\u683C\u91D1\u984D \uFF08\u534A\u89D2\u6570\u5B57\uFF09"),t("span",{class:"text-red-500"},"*")],-1),zt={class:"text-red-500 text-sm mt-1"},Kt={class:"mb-4"},Gt=t("label",{for:"bonus",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30DC\u30FC\u30CA\u30B9PT\uFF08\u534A\u89D2\u6570\u5B57\uFF09"),t("span",{class:"text-red-500"},"*")],-1),Jt={class:"text-red-500 text-sm mt-1"},Qt={key:0,class:"mb-4"},Wt=t("label",{for:"pt_rate",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u8CFC\u5165\u6642PT\u4ED8\u4E0E\u7279\u5178 (%)"),t("span",{class:"text-red-500"},"*")],-1),Xt={class:"text-red-500 text-sm mt-1"},Yt={key:1,class:"mb-4"},Zt=t("label",{for:"expiration",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30E9\u30F3\u30AF\u7DAD\u6301\u671F\u65E5 "),t("span",{class:"text-red-500"},"*")],-1),$t={class:"text-red-500 text-sm mt-1"},te={key:2,class:"mb-4"},ee=t("label",{for:"limit",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30E9\u30F3\u30AF\u7DAD\u6301\u8CFC\u5165\u91D1\u984D\uFF08\u534A\u89D2\u6570\u5B57\uFF09"),t("span",{class:"text-red-500"},"*")],-1),se={class:"text-red-500 text-sm mt-1"},oe={class:"mb-4"},re=t("label",{for:"file1-1",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30E9\u30F3\u30AF\u30D0\u30FC\u753B\u50CF "),t("span",{class:"text-red-500"},"*")],-1),ne={class:"text-center w-full"},ae=["src"],le={class:"text-red-500 text-sm mt-1"},ie={class:"mb-6 text-center"},de=["disabled"];function ue(e,o,l,r,_,a){const w=d("Head"),k=d("Doughnut"),C=d("PencilIcon"),D=d("TrashIcon"),y=d("TransitionChild"),T=d("DialogPanel"),F=d("Dialog"),L=d("TransitionRoot"),U=d("AppLayout");return u(),c(g,null,[i(w,{title:"\u30E9\u30F3\u30AF\u7279\u5178\u8A2D\u5B9A"}),i(U,null,{default:h(()=>[t("div",tt,[et,t("div",st,[t("div",ot,[i(k,{data:a.rankDistributionData,options:a.rankDistributionOptions},null,8,["data","options"])]),t("div",rt,[t("table",nt,[at,t("tbody",null,[(u(!0),c(g,null,v(l.rankData,(s,b)=>(u(),c("tr",{key:b,class:"border-b"},[t("td",lt,n(s.title),1),t("td",it,n(s.count),1),t("td",dt,[t("div",{class:"w-4 h-4 rounded-full",style:q({backgroundColor:_.chartColors[b]})},null,4)])]))),128))])])])])]),t("div",ut,[ct,mt,t("div",ft,[t("table",pt,[_t,t("tbody",null,[(u(!0),c(g,null,v(l.ranks,(s,b)=>(u(),c("tr",{key:b,class:"border-b"},[t("td",ht,n(s.rank),1),t("td",bt,n(s.title),1),t("td",{class:"p-2 text-center",innerHTML:a.pt_rate_string(s)},null,8,xt),t("td",gt,n(a.format_number(s.amount))+" \u5186",1),t("td",{class:"p-2 text-center",innerHTML:a.bonus_pt_string(s)},null,8,yt),t("td",{class:"p-2 text-center",innerHTML:a.expiration_string(s)},null,8,vt),t("td",{class:"p-2 text-center",innerHTML:a.limit_string(s)},null,8,wt),t("td",kt,[t("button",{type:"button",onClick:H=>a.modalOpen(s),class:"flex items-center justify-center w-9 h-9 rounded-full focus:outline-none hover:bg-sky-500 hover:text-white text-sky-500"},[i(C,{class:"h-5 w-5"})],8,Ct),t("button",{type:"button",onClick:H=>a.destroy_rank(s.id),class:"flex items-center justify-center w-9 h-9 rounded-full focus:outline-none hover:bg-rose-500 hover:text-white text-rose-500"},[i(D,{class:"h-5 w-5"})],8,Dt)])]))),128))])])])]),t("div",Tt,[t("button",{type:"button",onClick:o[0]||(o[0]=s=>a.modalOpen(0)),class:"inline-block items-center px-10 py-2.5 bg-cyan-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-cyan-700 active:bg-cyan-700 focus:outline-none focus:border-cyan-700 focus:shadow-outline-cyan transition ease-in-out duration-150 mr-2"}," \u8FFD\u52A0 ")]),t("template",null,[i(L,{as:"template",show:_.open},{default:h(()=>[i(F,{as:"div",class:"relative z-20",onClose:o[12]||(o[12]=s=>_.open=!1)},{default:h(()=>[i(y,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:h(()=>[Ft]),_:1}),t("div",Lt,[t("div",Ut,[i(y,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:h(()=>[i(T,{class:"p-3 relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:h(()=>[t("form",{onSubmit:o[11]||(o[11]=A(s=>a.submit(),["prevent"]))},[t("div",Ht,[It,f(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>r.form.rank=s),id:"rank",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.rank]]),t("div",Mt,n(l.errors.rank),1)]),t("div",Pt,[Vt,f(t("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>r.form.rankup=s),id:"rankup",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},jt,512),[[B,r.form.rankup]]),t("div",qt,n(l.errors.rankup),1)]),t("div",Et,[Ot,f(t("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>r.form.title=s),id:"title",type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.title]]),t("div",Nt,n(l.errors.title),1)]),t("div",St,[Rt,f(t("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>r.form.amount=s),id:"amount",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.amount]]),t("div",zt,n(l.errors.amount),1)]),t("div",Kt,[Gt,f(t("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>r.form.bonus=s),id:"bonus",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.bonus]]),t("div",Jt,n(l.errors.bonus),1)]),r.form.rankup=="1"?(u(),c("div",Qt,[Wt,f(t("input",{"onUpdate:modelValue":o[6]||(o[6]=s=>r.form.pt_rate=s),id:"pt_rate",type:"number",min:"0",step:"0.01",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.pt_rate]]),t("div",Xt,n(l.errors.pt_rate),1)])):x("",!0),r.form.rankup=="1"?(u(),c("div",Yt,[Zt,f(t("input",{"onUpdate:modelValue":o[7]||(o[7]=s=>r.form.expiration=s),id:"expiration",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.expiration]]),t("div",$t,n(l.errors.expiration),1)])):x("",!0),r.form.rankup=="1"?(u(),c("div",te,[ee,f(t("input",{"onUpdate:modelValue":o[8]||(o[8]=s=>r.form.limit=s),id:"limit",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.limit]]),t("div",se,n(l.errors.limit),1)])):x("",!0),t("div",oe,[re,t("div",ne,[_.url1?(u(),c("img",{key:0,src:_.url1,class:"inline-block mt-4 h-24"},null,8,ae)):x("",!0)]),t("input",{onChange:o[9]||(o[9]=(...s)=>a.previewImage1&&a.previewImage1(...s)),ref:"photo1",id:"file1-1",type:"file",class:"w-full"},null,544),t("div",le,n(l.errors.image),1)]),t("div",ie,[t("button",{type:"submit",class:j([{"opacity-25":r.form.processing},"inline-block items-center px-8 py-2.5 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150 mr-2"]),disabled:r.form.processing}," \u4FDD\u5B58 ",10,de),t("button",{type:"button",onClick:o[10]||(o[10]=s=>_.open=!1),class:"inline-block items-center px-8 py-2.5 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150"}," \u30AD\u30E3\u30F3\u30BB\u30EB ")])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]),_:1})],64)}const be=K($,[["render",ue]]);export{be as default};
