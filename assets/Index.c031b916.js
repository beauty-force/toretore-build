import{o as i,c as d,b as t,H,K as B,h as I,u as P,r as c,a as u,w as _,F as g,I as y,d as V,e as f,v as p,t as n,M as j,f as x,n as A,g as m,j as q}from"./app.3e1915e2.js";import{U as E}from"./UserLayout.14583c45.js";import{C as O,A as N,p as S,a as z,D as R}from"./index.5dec8fef.js";import{_ as K}from"./_plugin-vue_export-helper.cdc0426e.js";import{N as G,d as J,U as Q,o as W,f as X}from"./toastify.1e0826b6.js";function Y(e,o){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})])}function Z(e,o){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})])}O.register(N,S,z);const $={components:{Head:H,AppLayout:E,Doughnut:R,PencilIcon:Y,TrashIcon:Z,Dialog:G,DialogPanel:J,DialogTitle:Q,TransitionChild:W,TransitionRoot:X},props:{errors:Object,ranks:Object,rankData:Array},data(){return{chartColors:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#8E44AD","#2ECC71","#E74C3C","#3498DB","#F1C40F","#1ABC9C","#9B59B6","#34495E","#95A5A6"],url1:null,open:!1}},computed:{rankDistributionData(){return{labels:this.rankData.map(e=>e.title),datasets:[{data:this.rankData.map(e=>e.count),backgroundColor:this.chartColors,hoverBackgroundColor:this.chartColors}]}},rankDistributionOptions(){return{responsive:!0,cutout:"0%",plugins:{legend:{display:!1},tooltip:{callbacks:{label:e=>`${e.raw} \u4EBA`}}}}}},methods:{destroy_rank(e){confirm("\u524A\u9664\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304B\uFF1F")&&B.Inertia.delete(route("admin.rank.destroy",{id:e}))},modalOpen(e){e?(this.form.id=e.id,this.form.rank=e.rank,this.form.title=e.title,this.form.amount=e.amount,this.form.limit=e.limit,this.form.bonus=e.bonus,this.form.pt_rate=e.pt_rate,this.form.rankup=e.rankup,this.form.expiration=e.expiration,this.form.image="",this.url1=e.image):(this.form.id=0,this.form.rank="",this.form.title="",this.form.amount=0,this.form.limit=0,this.form.bonus=0,this.form.pt_rate=0,this.form.rankup=1,this.form.image="",this.form.expiration=0,this.url1=""),this.open=!0},submit(){this.$refs.photo1.files[0]&&(this.form.image=this.$refs.photo1.files[0]),this.form.rankup=="0"&&(this.form.pt_rate=0,this.form.expiration=0,this.form.limit=0),this.form.post(route("admin.rank.store"),{preserveScroll:!0,onFinish:()=>{I().props.value.flash.message&&(this.open=!1)}})},previewImage1(e){const o=e.target.files[0];this.url1=URL.createObjectURL(o)},pt_rate_string(e){return e.rankup==0?'<span class="text-[1.5em]">\u2014</span>':`${e.pt_rate}%`},format_number(e){return String(e).replace(/(.)(?=(\d{3})+$)/g,"$1,")},pt_rate_string(e){return e.rankup==0?'<span class="text-[1.5em]">\u2014</span>':`${e.pt_rate}%`},bonus_pt_string(e){return e.bonus==0?'<span class="text-[1.5em]">\u2014</span>':`${this.format_number(e.bonus)} PT`},expiration_string(e){return e.expiration==0?'<span class="text-[1.5em]">\u2014</span>':`${e.expiration}\u65E5`},limit_string(e){return e.limit==0?'<span class="text-[1.5em]">\u2014</span>':`${this.format_number(e.limit)} \u5186`}},setup(e){return{form:P({id:"",rank:"",title:"",amount:"",limit:"",expiration:"",bonus:"",pt_rate:"",rankup:"",image:""})}}},tt={class:"mb-6 max-w-3xl mx-auto"},et=t("h2",{class:"text-lg font-bold text-center mb-4"},"\u30E9\u30F3\u30AF\u5206\u5E03",-1),st={class:"flex flex-col md:flex-row items-center justify-center gap-8"},ot={class:"w-full max-w-xs md:max-w-sm"},rt={class:"w-full max-w-sm"},nt={class:"w-full text-sm bg-white shadow rounded-lg"},at=t("thead",null,[t("tr",{class:"bg-gray-200"},[t("th",{class:"p-2 text-left"},"\u30E9\u30F3\u30AF\u540D"),t("th",{class:"p-2 text-left"},"\u4EBA\u6570"),t("th",{class:"p-2 text-left"},"\u8272")])],-1),lt={class:"p-2"},it={class:"p-2"},dt={class:"p-2"},ut={class:"pt-4 px-2 md:px-4 py-2 max-w-3xl mx-auto"},ct=t("h1",{class:"mb-2 text-lg font-bold"},"\u30E9\u30F3\u30AF\u7279\u5178\u8A2D\u5B9A",-1),mt=t("hr",{class:"mb-2"},null,-1),ft={class:"w-full overflow-auto text-sm"},pt={class:"min-w-full mt-2 bg-white shadow rounded-lg"},ht=t("thead",null,[t("tr",{class:"bg-gray-200 whitespace-nowrap"},[t("th",{class:"p-2"},"\u30E9\u30F3\u30AF"),t("th",{class:"p-2"},"\u30E9\u30F3\u30AF\u540D"),t("th",{class:"p-2"},"\u8CFC\u5165\u6642PT\u4ED8\u4E0E"),t("th",{class:"p-2"},"\u5230\u9054\u91D1\u984D"),t("th",{class:"p-2"},"\u30DC\u30FC\u30CA\u30B9PT"),t("th",{class:"p-2"},"\u7DAD\u6301\u671F\u65E5"),t("th",{class:"p-2"},"\u7DAD\u6301\u91D1\u984D"),t("th")])],-1),_t={class:"p-2 text-center"},bt={class:"p-2 text-center"},xt=["innerHTML"],gt={class:"p-2 text-center"},vt=["innerHTML"],yt=["innerHTML"],wt=["innerHTML"],kt={class:"px-1 py-2 flex items-center justify-center gap-0.5"},Ct=["onClick"],Dt=["onClick"],Tt={class:"text-center my-6"},Lt=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Ft={class:"fixed inset-0 z-20 overflow-y-auto"},Mt={class:"flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"},Ut={class:"mb-4"},Ht=t("label",{for:"rank",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30E9\u30F3\u30AF\uFF08\u534A\u89D2\u6570\u5B57\uFF09"),t("span",{class:"text-red-500"},"*")],-1),Bt={class:"text-red-500 text-sm mt-1"},It={class:"mb-4"},Pt=t("label",{for:"rankup",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u7A2E\u985E"),t("span",{class:"text-red-500"},"*")],-1),Vt=t("option",{value:"1"},"\u30E9\u30F3\u30AF",-1),jt=t("option",{value:"0"},"\u30DF\u30C9\u30EB\u30AE\u30D5\u30C8",-1),At=[Vt,jt],qt={class:"text-red-500 text-sm mt-1"},Et={class:"mb-4"},Ot=t("label",{for:"title",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30E9\u30F3\u30AF\u540D"),t("span",{class:"text-red-500"},"*")],-1),Nt={class:"text-red-500 text-sm mt-1"},St={class:"mb-4"},zt=t("label",{for:"amount",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30E9\u30F3\u30AF\u3078\u306E\u6607\u683C\u91D1\u984D \uFF08\u534A\u89D2\u6570\u5B57\uFF09"),t("span",{class:"text-red-500"},"*")],-1),Rt={class:"text-red-500 text-sm mt-1"},Kt={class:"mb-4"},Gt=t("label",{for:"bonus",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30DC\u30FC\u30CA\u30B9PT\uFF08\u534A\u89D2\u6570\u5B57\uFF09"),t("span",{class:"text-red-500"},"*")],-1),Jt={class:"text-red-500 text-sm mt-1"},Qt={key:0,class:"mb-4"},Wt=t("label",{for:"pt_rate",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u8CFC\u5165\u6642PT\u4ED8\u4E0E\u7279\u5178 (%)"),t("span",{class:"text-red-500"},"*")],-1),Xt={class:"text-red-500 text-sm mt-1"},Yt={key:1,class:"mb-4"},Zt=t("label",{for:"expiration",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30E9\u30F3\u30AF\u7DAD\u6301\u671F\u65E5 "),t("span",{class:"text-red-500"},"*")],-1),$t={class:"text-red-500 text-sm mt-1"},te={key:2,class:"mb-4"},ee=t("label",{for:"limit",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30E9\u30F3\u30AF\u7DAD\u6301\u8CFC\u5165\u91D1\u984D\uFF08\u534A\u89D2\u6570\u5B57\uFF09"),t("span",{class:"text-red-500"},"*")],-1),se={class:"text-red-500 text-sm mt-1"},oe={class:"mb-4"},re=t("label",{for:"file1-1",class:"block font-medium text-sm text-neutral-700 mb-1"},[m("\u30E9\u30F3\u30AF\u30D0\u30FC\u753B\u50CF "),t("span",{class:"text-red-500"},"*")],-1),ne={class:"text-center w-full"},ae=["src"],le={class:"text-red-500 text-sm mt-1"},ie={class:"mb-6 text-center"},de=["disabled"];function ue(e,o,l,r,h,a){const w=c("Head"),k=c("Doughnut"),C=c("PencilIcon"),D=c("TrashIcon"),v=c("TransitionChild"),T=c("DialogPanel"),L=c("Dialog"),F=c("TransitionRoot"),M=c("AppLayout");return i(),d(g,null,[u(w,{title:"\u30E9\u30F3\u30AF\u7279\u5178\u8A2D\u5B9A"}),u(M,null,{default:_(()=>[t("div",tt,[et,t("div",st,[t("div",ot,[u(k,{data:a.rankDistributionData,options:a.rankDistributionOptions},null,8,["data","options"])]),t("div",rt,[t("table",nt,[at,t("tbody",null,[(i(!0),d(g,null,y(l.rankData,(s,b)=>(i(),d("tr",{key:b,class:"border-b"},[t("td",lt,n(s.title),1),t("td",it,n(s.count),1),t("td",dt,[t("div",{class:"w-4 h-4 rounded-full",style:q({backgroundColor:h.chartColors[b]})},null,4)])]))),128))])])])])]),t("div",ut,[ct,mt,t("div",ft,[t("table",pt,[ht,t("tbody",null,[(i(!0),d(g,null,y(l.ranks,(s,b)=>(i(),d("tr",{key:b,class:"border-b"},[t("td",_t,n(s.rank),1),t("td",bt,n(s.title),1),t("td",{class:"p-2 text-center",innerHTML:a.pt_rate_string(s)},null,8,xt),t("td",gt,n(a.format_number(s.amount))+" \u5186",1),t("td",{class:"p-2 text-center",innerHTML:a.bonus_pt_string(s)},null,8,vt),t("td",{class:"p-2 text-center",innerHTML:a.expiration_string(s)},null,8,yt),t("td",{class:"p-2 text-center",innerHTML:a.limit_string(s)},null,8,wt),t("td",kt,[t("button",{type:"button",onClick:U=>a.modalOpen(s),class:"flex items-center justify-center w-9 h-9 rounded-full focus:outline-none hover:bg-sky-500 hover:text-white text-sky-500"},[u(C,{class:"h-5 w-5"})],8,Ct),t("button",{type:"button",onClick:U=>a.destroy_rank(s.id),class:"flex items-center justify-center w-9 h-9 rounded-full focus:outline-none hover:bg-rose-500 hover:text-white text-rose-500"},[u(D,{class:"h-5 w-5"})],8,Dt)])]))),128))])])])]),t("div",Tt,[t("button",{type:"button",onClick:o[0]||(o[0]=s=>a.modalOpen(0)),class:"inline-block items-center px-10 py-2.5 bg-cyan-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-cyan-700 active:bg-cyan-700 focus:outline-none focus:border-cyan-700 focus:shadow-outline-cyan transition ease-in-out duration-150 mr-2"}," \u8FFD\u52A0 ")]),t("template",null,[u(F,{as:"template",show:h.open},{default:_(()=>[u(L,{as:"div",class:"relative z-20",onClose:o[12]||(o[12]=s=>h.open=!1)},{default:_(()=>[u(v,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:_(()=>[Lt]),_:1}),t("div",Ft,[t("div",Mt,[u(v,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:_(()=>[u(T,{class:"p-3 relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:_(()=>[t("form",{onSubmit:o[11]||(o[11]=V(s=>a.submit(),["prevent"]))},[t("div",Ut,[Ht,f(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>r.form.rank=s),id:"rank",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.rank]]),t("div",Bt,n(l.errors.rank),1)]),t("div",It,[Pt,f(t("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>r.form.rankup=s),id:"rankup",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},At,512),[[j,r.form.rankup]]),t("div",qt,n(l.errors.rankup),1)]),t("div",Et,[Ot,f(t("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>r.form.title=s),id:"title",type:"text",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.title]]),t("div",Nt,n(l.errors.title),1)]),t("div",St,[zt,f(t("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>r.form.amount=s),id:"amount",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.amount]]),t("div",Rt,n(l.errors.amount),1)]),t("div",Kt,[Gt,f(t("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>r.form.bonus=s),id:"bonus",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.bonus]]),t("div",Jt,n(l.errors.bonus),1)]),r.form.rankup=="1"?(i(),d("div",Qt,[Wt,f(t("input",{"onUpdate:modelValue":o[6]||(o[6]=s=>r.form.pt_rate=s),id:"pt_rate",type:"number",min:"0",step:"0.01",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.pt_rate]]),t("div",Xt,n(l.errors.pt_rate),1)])):x("",!0),r.form.rankup=="1"?(i(),d("div",Yt,[Zt,f(t("input",{"onUpdate:modelValue":o[7]||(o[7]=s=>r.form.expiration=s),id:"expiration",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.expiration]]),t("div",$t,n(l.errors.expiration),1)])):x("",!0),r.form.rankup=="1"?(i(),d("div",te,[ee,f(t("input",{"onUpdate:modelValue":o[8]||(o[8]=s=>r.form.limit=s),id:"limit",type:"number",class:"w-full border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md shadow-sm placeholder-neutral-300",required:""},null,512),[[p,r.form.limit]]),t("div",se,n(l.errors.limit),1)])):x("",!0),t("div",oe,[re,t("div",ne,[h.url1?(i(),d("img",{key:0,src:h.url1,class:"inline-block mt-4 h-24"},null,8,ae)):x("",!0)]),t("input",{onChange:o[9]||(o[9]=(...s)=>a.previewImage1&&a.previewImage1(...s)),ref:"photo1",id:"file1-1",type:"file",class:"w-full"},null,544),t("div",le,n(l.errors.image),1)]),t("div",ie,[t("button",{type:"submit",class:A([{"opacity-25":r.form.processing},"inline-block items-center px-8 py-2.5 bg-green-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150 mr-2"]),disabled:r.form.processing}," \u4FDD\u5B58 ",10,de),t("button",{type:"button",onClick:o[10]||(o[10]=s=>h.open=!1),class:"inline-block items-center px-8 py-2.5 bg-red-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150"}," \u30AD\u30E3\u30F3\u30BB\u30EB ")])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]),_:1})],64)}const _e=K($,[["render",ue]]);export{_e as default};
