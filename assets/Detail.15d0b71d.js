import{r as b,o as l,c as r,f as a,a as m,t as o,b as t,n as g,H as v,L as j,u as h,w as C,F as _,e as L,v as P,I as y}from"./app.6e3dd78d.js";import{U as S}from"./UserLayout.8f549fe7.js";import{_ as x}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as I}from"./ChevronRightIcon.b3a860ab.js";import{a as H}from"./toastify.41dd7e49.js";import{r as O}from"./EllipsisHorizontalIcon.4fbc20a4.js";const N={components:{ChevronRightIcon:I,ChevronLeftIcon:H,EllipsisHorizontalIcon:O},props:{callback:Function,total:Number},data(){return{page:1}},methods:{}},E={key:0,class:"flex justify-center items-center"},F={key:1,class:"p-2"},z={key:4,class:"p-2"};function D(c,s,e,d,n,u){const f=b("EllipsisHorizontalIcon");return e.total>1?(l(),r("div",E,[n.page>1?(l(),r("button",{key:0,onClick:s[0]||(s[0]=()=>{e.callback(n.page=1)}),class:"rounded-l-md border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},"1")):a("",!0),n.page>3?(l(),r("span",F,[m(f,{class:"w-5"})])):a("",!0),n.page>2?(l(),r("button",{key:2,onClick:s[1]||(s[1]=()=>{e.callback(n.page=n.page-1)}),class:"border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},o(n.page-1),1)):a("",!0),t("button",{onClick:s[2]||(s[2]=()=>{e.callback(n.page)}),class:g(["w-9 h-9 flex justify-center items-center text-white bg-neutral-600",{"rounded-l-md":n.page==1,"rounded-r-md":n.page==e.total}])},o(n.page),3),n.page+1<e.total?(l(),r("button",{key:3,onClick:s[3]||(s[3]=()=>{e.callback(n.page=n.page+1)}),class:"border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},o(n.page+1),1)):a("",!0),n.page+2<e.total?(l(),r("span",z,[m(f,{class:"w-5"})])):a("",!0),n.page<e.total?(l(),r("button",{key:5,onClick:s[4]||(s[4]=()=>{e.callback(n.page=e.total)}),class:"rounded-r-md border w-9 h-9 flex justify-center items-center hover:bg-neutral-200"},o(e.total),1)):a("",!0)])):a("",!0)}const V=x(N,[["render",D]]),A={components:{Head:v,AppLayout:S,Link:j,PaginationClientSide:V},props:{errors:Object,user:Object,profile:Object,payments:Object,coupons:Object,point_logs:Object,show_limit:Number,rank:String,products:Object},mounted(){},methods:{submit(){this.form.post(route("admin.users.update"),{preserveScroll:!0,onFinish:()=>{}})},format_number(c){return String(c).replace(/(.)(?=(\d{3})+$)/g,"$1,")},onPageChange(c){this.current_page=c},updateStatus(c,s){h({id:c,status:s}).post(route("admin.users.update"))}},data(){return{current_page:1}},setup(c){const s=h({id:c.user.id,point:c.user.point}),e=h({id:c.user.id}),d=Math.floor((c.point_logs.length+c.show_limit-1)/c.show_limit);return{form:s,totalPage:d,clear_form:e}},computed:{paginatedLogs(){const c=(this.current_page-1)*this.show_limit,s=this.current_page*this.show_limit;return this.point_logs.slice(c,s)}}},B={class:"md:px-4 px-2 max-w-3xl mx-auto"},T={class:"border-b w-full p-2 my-2 font-semibold flex justify-between"},U=t("button",{onclick:"history.back()",class:"rounded-md px-2 text-sm font-normal text-white bg-red-500 hover:bg-red-400"}," \u623B\u308B ",-1),J={class:"w-full text-sm"},M=t("td",{class:"p-1 w-2/5 font-bold"},"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",-1),R={class:"p-1 w-3/5"},Y=t("td",{class:"p-1 w-2/5 font-bold"},"\u96FB\u8A71\u756A\u53F7",-1),q={class:"p-1 w-3/5"},G=t("td",{class:"p-1 w-2/5 font-bold"},"\u30DD\u30A4\u30F3\u30C8",-1),K={class:"p-1 w-3/5"},Q=t("td",{class:"p-1 w-2/5 font-bold"},"\u73FE\u5728\u306E\u30E9\u30F3\u30AF\u306E\u53D6\u5F15\u91D1\u984D",-1),W={class:"p-1 w-3/5"},X=t("td",{class:"p-1 w-2/5 font-bold"},"\u540D\u524D",-1),Z={class:"p-1 w-3/5"},$=t("td",{class:"p-1 w-2/5 font-bold"},"\u540D\u524D(\u30AB\u30CA)",-1),tt={class:"p-1 w-3/5"},et=t("td",{class:"p-1 w-2/5 font-bold"},"\u90F5\u4FBF\u756A\u53F7",-1),st={class:"p-1 w-3/5"},ot=t("td",{class:"p-1 w-2/5 font-bold"},"\u90FD\u9053\u5E9C\u770C",-1),nt={class:"p-1 w-3/5"},lt=t("td",{class:"p-1 w-2/5 font-bold"},"\u4F4F\u6240",-1),rt={class:"p-1 w-3/5"},it=t("td",{class:"p-1 w-2/5 font-bold"},"\u30E9\u30F3\u30AF",-1),ct={class:"p-1 w-3/5"},at=t("td",{class:"p-1 w-2/5 font-bold"},"LINE\u9023\u643A",-1),dt={class:"p-1 w-3/5"},ut={key:2},_t=t("td",{class:"p-1 w-2/5 font-bold"},"\u30A2\u30AB\u30A6\u30F3\u30C8\u627F\u8A8D",-1),mt={class:"p-1 w-3/5"},ft={class:"my-6 text-center border border-sky-500 rounded-full p-0.5 w-fit mx-auto text-sm"},bt=["disabled"],ht={class:"border-b w-full p-2 my-2 font-semibold flex justify-between items-center"},pt=t("h3",null,"\u30DD\u30A4\u30F3\u30C8\u5C65\u6B74",-1),yt={class:"w-full flex flex-col gap-4 mb-8 text-sm md:text-base overflow-auto"},gt={class:"min-w-full table-auto"},xt=t("thead",null,[t("tr",{class:"border border-collapse divide-x-2"},[t("th",{class:"text-center py-2"},"\u4E8B\u7531"),t("th",{class:"text-center py-2"},"\u30DD\u30A4\u30F3\u30C8\uFF08\u5229\u7528\uFF09"),t("th",{class:"text-center py-2"},"\u6B21\u306E\u30DD\u30A4\u30F3\u30C8\uFF08PT\u6B8B\u9AD8\uFF09"),t("th",{class:"text-center py-2"},"\u65E5\u6642")])],-1),wt={class:"text-sm"},kt={class:"border divide-x-2"},vt={class:"text-center py-2"},jt={class:"text-center py-2"},Ct={class:"text-center py-2"},Lt={class:"text-center py-2"},Pt={class:"border-b w-full p-2 my-2 font-semibold"},St=t("h3",null,"\u7372\u5F97\u3057\u305F\u5546\u54C1\u4E00\u89A7",-1),It={key:0,class:"flex flex-wrap justify-evenly text-sm"},Ht={class:"mt-1 py-1 px-2 hover:bg-sky-50 focus:bg-sky-50"},Ot={class:"flex border-neutral-200 items-start h-28"},Nt=["src"],Et={class:"cursor-pointer items-start justify-center inline-block text-sm py-1"},Ft={class:"ml-2 flex flex-col self-stretch justify-around py-3 text-xs"},zt={class:"py-1 px-1"},Dt={class:"py-1 px-1"},Vt={key:0,class:"flex bg-[#ff8000] justify-center items-center rounded-full px-2 md:my-1 mx-1 py-1 text-white w-fit"},At=t("img",{src:"/images/icon_cash.png",class:"h-5 mr-2"},null,-1);function Bt(c,s,e,d,n,u){const f=b("Head"),w=b("PaginationClientSide"),k=b("AppLayout");return l(),r(_,null,[m(f,{title:"\u30E6\u30FC\u30B6\u30FC\u7BA1\u7406"}),m(k,null,{default:C(()=>{var p;return[t("div",B,[t("div",T,[t("h3",null,"\u30E6\u30FC\u30B6\u30FC\u8A73\u7D30 (ID-"+o(e.user.id)+")",1),U]),t("table",J,[e.user?(l(),r(_,{key:0},[t("tr",null,[M,t("td",R,o(e.user.email),1)]),t("tr",null,[Y,t("td",q,o(e.user.phone),1)]),t("tr",null,[G,t("td",K,[L(t("input",{class:"bg-white/90 w-full px-3 py-2 border border-neutral-300 focus:border-neutral-300 focus:ring focus:ring-neutral-200 focus:ring-opacity-50 rounded-md placeholder-neutral-400",type:"number","onUpdate:modelValue":s[0]||(s[0]=i=>d.form.point=i)},null,512),[[P,d.form.point]])])]),t("tr",null,[Q,t("td",W,o(e.user.purchase_amount.toLocaleString("jp-JP",{style:"currency",currency:"JPY"})),1)])],64)):a("",!0),e.profile?(l(),r(_,{key:1},[t("tr",null,[X,t("td",Z,o(e.profile.first_name)+" "+o(e.profile.last_name),1)]),t("tr",null,[$,t("td",tt,o(e.profile.first_name_gana)+" "+o(e.profile.last_name_gana),1)]),t("tr",null,[et,t("td",st,o(e.profile.postal_code),1)]),t("tr",null,[ot,t("td",nt,o(e.profile.prefecture),1)]),t("tr",null,[lt,t("td",rt,o(e.profile.address),1)]),t("tr",null,[it,t("td",ct,o(e.rank),1)]),t("tr",null,[at,t("td",dt,o((p=e.user.line_id)!=null?p:"\u672A\u9023\u643A"),1)])],64)):a("",!0),e.user.type!=1?(l(),r("tr",ut,[_t,t("td",mt,[e.user.status?(l(),r("button",{key:0,onClick:s[1]||(s[1]=i=>u.updateStatus(e.user.id,0)),class:"px-2 py-1 rounded-md border text-rose-500 hover:bg-rose-100"},"\u524A\u9664")):(l(),r("button",{key:1,onClick:s[2]||(s[2]=i=>u.updateStatus(e.user.id,1)),class:"px-2 py-1 rounded-md border text-sky-500 hover:bg-sky-100"},"\u627F\u8A8D"))])])):a("",!0)]),t("div",ft,[t("button",{type:"button",onClick:s[3]||(s[3]=(...i)=>u.submit&&u.submit(...i)),class:g([{"opacity-25":d.form.processing},"inline-block items-center px-10 py-1 rounded-full font-semibold text-white uppercase bg-sky-500 hover:bg-sky-600"]),disabled:d.form.processing}," \u4FDD\u5B58 ",10,bt)]),t("div",ht,[pt,m(w,{callback:u.onPageChange,total:d.totalPage},null,8,["callback","total"])]),t("div",yt,[t("table",gt,[xt,t("tbody",wt,[(l(!0),r(_,null,y(u.paginatedLogs,i=>(l(),r("tr",kt,[t("td",vt,o(i.point_type),1),t("td",jt,o(i.point_diff),1),t("td",Ct,o(i.point_before+i.point_diff),1),t("td",Lt,o(i.updated_at1),1)]))),256))])])]),t("div",Pt,[St,e.products.data.length?(l(),r("div",It,[(l(!0),r(_,null,y(e.products.data,(i,Tt)=>(l(),r("div",Ht,[t("div",Ot,[t("img",{src:i.image,class:"w-20 h-28 inline-block object-contain"},null,8,Nt),t("label",Et,[t("div",Ft,[t("div",zt,o(i.name),1),t("div",Dt,o(i.rare),1),i.is_lost_product!=2?(l(),r("div",Vt,[At,t("span",null,o(i.point)+"\xA0PT",1)])):a("",!0)])])])]))),256))])):a("",!0)])])]}),_:1})],64)}const Gt=x(A,[["render",Bt]]);export{Gt as default};
